!function (a) { function g(b) { return a(b).hasClass("form-inline") ? 1 : a(b).hasClass("form-horizontal") ? 2 : 0 } a.fn.validation = function (b, c) { return this.length ? this.each(function () { f = a.extend({}, a.fn.validation.defaults, c), f.callback = b, a(this).attr("novalidate", "novalidate"), e = g(this), k(this) }) : (c && c.debug && window.console && console.warn("Nothing selected, can't validate, returning nothing."), void 0) }, a.fn.valid = function () { if (b) return !1; b = !0; var e = !1; return a("input, textarea", this).each(function () { var b = a(this), c = b.parents(".form-group"), f = void 0 == b.attr("check-type") ? null : b.attr("check-type").split(" "); !c.hasClass("has-success") && null != f && f.length > 0 && (h(this, f) || (0 == d && (scrollTo(0, b[0].offsetTop - 50), d = !0), e = !0)) }), d = !1, b = !1, !e }, a.fn.validation.defaults = { validRules: [{ name: "required", validate: function (b) { return "" == a.trim(b) }, defaultMsg: "\u5199\u70b9\u5185\u5bb9\u5427\uff01" }, { name: "number", validate: function (a) { return !/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a) }, defaultMsg: "\u8bf7\u8f93\u5165\u6570\u5b57\u3002" }, { name: "mail", validate: function (a) { return !/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a) }, defaultMsg: "\u8bf7\u8f93\u5165\u90ae\u7bb1\u5730\u5740\u3002" }, { name: "char", validate: function (a) { return !/^[a-z\_\-A-Z]*$/.test(a) }, defaultMsg: "\u8bf7\u8f93\u5165\u82f1\u6587\u5b57\u7b26\u3002" }, { name: "chinese", validate: function (a) { return !/^[\u4e00-\u9fff]$/.test(a) }, defaultMsg: "\u8bf7\u8f93\u5165\u6c49\u5b57\u3002" }, { name: "url", validate: function (a) { return !/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a) }, defaultMsg: "\u8bf7\u8f93\u5165\u7f51\u5740" }, { name: "date", validate: function (a) { return /Invalid|NaN/.test(new Date(a).toString()) }, defaultMsg: "\u65e5\u671f\u683c\u5f0fXXXX-XX-XX\u3002" }, { name: "tel", validate: function (a) { return !/^(\d{11}$|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)/.test(a) }, defaultMsg: "\u7eb3\u5c3c\uff0c\u7535\u8bdd\u53f7\u7801\u8981\u6b63\u786e\u54e6\uff01" }, { name: "phone", validate: function (a) { return !/^1\d{10}$/.test(a) }, defaultMsg: "\u7eb3\u5c3c\uff0c\u624b\u673a\u53f7\u7801\u8981\u6b63\u786e\u54e6\uff01" }], reqmark: !0, callback: null }; var b = !1, d = !1, e = 0, f = {}, h = function (b, c) { var m, d = a(b), e = !1, h = "", k = d.attr("minlength") ? d.attr("minlength") : null, l = d.attr("range") ? d.attr("range") : null; for (i = 0; i < c.length; i++) { var n = !0, o = c[i]; m = void 0 == d.attr(o + "-message") ? null : d.attr(o + "-message"), "!" == o.substr(0, 1) && (n = !1, o = o.substr(1, o.length - 1)); var p = f.validRules; for (j = 0; j < p.length; j++) { var q = p[j]; if (o == q.name) { var r, txt; if (r = "checkbox" == d.attr("type") ? d.is(":checked") ? "true" : "" : d.val(), q.validate.call(b, r) == n) { e = !0; if (d.data('valihint') != undefined && q.name == "required") { txt = d.data("valihint") + "\uff01" } else { txt = q.defaultMsg }; h = "file" == d.attr("type").toLowerCase() ? null == m ? "\u8bf7\u9009\u62e9\u6587\u4ef6\u3002" : m : null == m ? txt : m; break } } } if (e) break } if (k && !e && (e = d.val().length < k, !e || null != m && "" != h || (h = "\u8f93\u5165\u957f\u5ea6\u5927\u4e8e\u7b49\u4e8e" + k)), a.inArray("number", c) >= 0 && l && !e) { var s = l.split("~"); if (2 == s.length) e = parseFloat(d.val()) < parseFloat(s[0]) || parseFloat(d.val()) > parseFloat(s[1]), !e || null != m && "" != h || (h = "\u8f93\u5165\u503c\u5728\uff3b" + s[0] + "~" + s[1] + "]\u4e4b\u95f4\u3002"); else { var s = l.split(","); s.length > 0 && (e = a.inArray(d.val(), s) < 0, !e || null != m && "" != h || (h = "\u8f93\u5165\u503c\u4e3a" + l + "\u7684\u5176\u4e2d\u4e00\u4e2a\u3002")) } } if (!e && f.callback) { var t = { msg: "", err: e }, u = a.ajaxSettings.async; a.ajaxSetup({ async: !1 }), f.callback(b, t), e = t.err, !e || null != m && "" != h ? "" != t.msg && (h = t.msg) : h = t.msg, a.ajaxSetup({ async: u }) } var v = d.parents(".form-group"); v.removeClass("has-error has-success"), v.addClass(0 == e ? "has-success" : "has-error"); var w = d.parents("form"); if (w) { var x = g(w); 0 == x ? (v.find("#valierr").remove(), d.after('<span class="help-block" id="valierr">' + h + "</span>")) : 1 == x || 2 == x && (v.find("#valierr").remove(), d.parent().after('<span class="help-block" id="valierr">' + h + "</span>")) } return !e }, k = function (b) { a(b).find("input, textarea").each(function () { var b = a(this); b.on("blur", function () { valid = void 0 == b.attr("check-type") ? null : b.attr("check-type").split(" "), valid && h(this, valid) }) }), a(b).find("input[type='file']").each(function () { var b = a(this); b.on("change", function () { valid = void 0 == b.attr("check-type") ? null : b.attr("check-type").split(" "), valid && h(this, valid) }) }), 1 == f.reqmark && (0 == e ? a(b).find(".form-group>label").each(function () { var b = a(this), c = b.parents(".form-group"); c.removeClass("has-error has-success") }) : 1 == e || 2 == e && a(b).find("input, textarea").each(function () { var b = a(this), c = b.parents(".form-group"); c.removeClass("has-error has-success"), c.find("#valierr").remove(), valid = void 0 == b.attr("check-type") ? null : b.attr("check-type").split(" "), valid && a.inArray("required", valid) >= 0 && b.parent().after('<span class="help-block" id="valierr" style="color:#FF9966">*</span>') })) } }(window.jQuery);